//@version=2
strategy("Outsidebar vs Insidebar, Illusion Strategy (by ChartArt)",overlay=true)

// WARNING: This strategy does not work!
// Please don't trade with this strategy. It's only shared for educational purpose.

OutSideBar = high > high[1] and low < low[1] 
InSideBar = high < high[1] and low > low[1] 

TrendChange = OutSideBar[1] and InSideBar ? lime : InSideBar[1] and OutSideBar ? fuchsia : gray
barcolor(TrendChange)
TrendChangeBG = OutSideBar[1] and InSideBar ? green : InSideBar[1] and OutSideBar ? maroon : na
bgcolor(TrendChangeBG,transp=90)

if ( OutSideBar[1] and InSideBar )
    strategy.entry("Long", strategy.long, comment="Out,In: Long")
    
if ( InSideBar[1] and OutSideBar )
    strategy.entry("Short", strategy.short, comment="In,Out: Short")